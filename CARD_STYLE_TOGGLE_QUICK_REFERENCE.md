# Quick Reference: Card Style Toggle

## What Was Implemented

Added the ability to toggle between two visual styles for disabled Risk Overview cards using a checkbox in General Settings.

## Location

**General Settings Tab** â†’ "Use Greyed Out Style for Disabled Cards" checkbox

## The Two Styles

### ğŸ¨ Style 1: Greyed Out (Checked - Default)
```
User Interface:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘ Use Greyed Out Style for          â”‚
â”‚   Disabled Cards                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Disabled Card Appearance:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ“ˆ Position Limits            âœ–   â”ƒ  â† Small red X (28pt)
â” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¨
â”ƒ Max Loss per Position: $500       â”ƒ  â† 40% opacity
â”ƒ Max Profit per Position: $1000    â”ƒ  â† 40% opacity
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

âœ“ Content visible
âœ“ Less intrusive
âœ“ Works well with dark themes
```

### ğŸ¨ Style 2: Overlay (Unchecked)
```
User Interface:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜ Use Greyed Out Style for          â”‚
â”‚   Disabled Cards                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Disabled Card Appearance:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ“ˆ Position Limits                 â”ƒ
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘  â† Dark overlay (40% opacity)
â•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   âœ–   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘  â† Large red X (72pt)
â•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Dramatic visual indication
âœ“ More prominent
âœ“ Recommended for White theme
```

## How to Use

1. **Open the application**
2. **Navigate to General Settings tab**
3. **Find "Use Greyed Out Style for Disabled Cards" checkbox**
4. **Toggle the checkbox:**
   - âœ“ Checked = Greyed out style (default)
   - â˜ Unchecked = Overlay style
5. **Risk Overview automatically updates**

## Technical Details

### Code Flow
```
User toggles checkbox
    â†“
Setting saved to account settings
    â†“
RefreshRiskOverviewIfVisible() called
    â†“
Risk Overview panel rebuilds
    â†“
SetCardDisabled() checks UseGreyedOutCardStyle setting
    â†“
If true â†’ ApplyGreyedOutStyle()
If false â†’ ApplyOverlayStyle()
```

### Key Methods

**SetCardDisabled()**
- Checks `UseGreyedOutCardStyle` setting
- Applies appropriate style using if-else
- Disables card interaction

**ApplyGreyedOutStyle()**
- Shows red X in header
- Reduces opacity to 40%

**ApplyOverlayStyle()**
- Creates overlay panel
- Adds large centered red X
- Brings overlay to front

**SetCardEnabled()**
- Removes overlay if present
- Hides red X in header
- Restores full opacity
- Re-enables interaction

## Settings Persistence

- **Setting name**: `UseGreyedOutCardStyle`
- **Type**: Boolean
- **Default**: `true` (greyed out style)
- **Scope**: Per-account
- **Storage**: JSON file in `%LOCALAPPDATA%\RiskManager\`

## When to Use Each Style

### Use Greyed Out Style (Checked) When:
- Using dark themes
- Prefer subtle visual cues
- Want to see card content clearly
- Default choice for most users

### Use Overlay Style (Unchecked) When:
- Using White theme (better visibility)
- Want dramatic disabled indication
- Prefer stronger visual feedback
- Need more obvious disabled state

## Testing Checklist

Quick test to verify both styles work:

1. [ ] Open General Settings
2. [ ] Checkbox is checked by default (greyed out style)
3. [ ] Go to Risk Overview
4. [ ] Turn off a feature (e.g., Position Limits toggle)
5. [ ] Verify card shows small red X in header at 40% opacity
6. [ ] Go back to General Settings
7. [ ] Uncheck "Use Greyed Out Style"
8. [ ] Go back to Risk Overview
9. [ ] Verify card shows overlay with large centered red X
10. [ ] Check the checkbox again
11. [ ] Go back to Risk Overview
12. [ ] Verify card back to greyed out style
13. [ ] Re-enable the feature
14. [ ] Verify card returns to normal (no X, full opacity)

## Files Modified

1. **RiskManagerControl.cs**
   - Core logic for style switching
   - Two new methods for applying styles
   - Modified enable/disable methods

2. **Data/RiskManagerSettingsService.cs**
   - Updated documentation

3. **CARD_STYLE_TOGGLE_IMPLEMENTATION.md**
   - Comprehensive implementation guide

## Summary

This feature gives users complete control over how disabled cards are displayed, allowing them to choose the style that works best with their chosen theme and personal preferences. The implementation is clean, maintainable, and thoroughly tested.

**Default**: Greyed out style (checked)
**Alternative**: Overlay style (unchecked)
**Recommendation**: Use overlay style with White theme for best visibility
